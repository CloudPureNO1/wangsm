webpackJsonp([13],{Phsv:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Dd8w"),a=o.n(r),n=o("NYxO"),l=o("qBvb"),i=o("V8q2"),s={data:function(){return{maxHeight:100,showOverflowTooltip:!0,fixed:"right",opWidth:"200",align:"center",pageSizes:[10,20,50,100,200,300,400,500],isSiglePageHide:!1,pglayout:"total, sizes, prev, pager,  next, jumper"}},created:function(){this.$nextTick(function(){var e=this.$el.parentElement.parentElement.parentElement.offsetHeight,t=document.getElementsByClassName("el-tabs__header is-top")[0].offsetHeight;this.maxHeight=e-t-43})},computed:a()({},Object(n.d)({roleTypes:function(e){return e.comm.roleTypes},roleList:function(e){return e.role.roleList},total:function(e){return e.role.total},pageSize:function(e){return e.role.pageSize},currentPage:function(e){return e.role.currentPage}})),mounted:function(){0==this.roleList.length&&l.a.$loadRoles(this,{pageSize:this.pageSize,currentPage:this.currentPage})},methods:a()({},Object(n.b)({setPageSize:"role/setPageSize",setCurrentPage:"role/setCurrentPage"}),{formatRoleTypes:function(e,t){0==this.roleTypes.length&&i.a.$loadRoleTypes(this);var o=this.roleTypes.find(function(t){return t.value==e.roleType});return null!=o&&void 0!=o?o.label:e.roleType},handleAdd:function(){this.$router.push({path:"/roleAddEdit",query:{roleData:{}}})},handleClick:function(e,t){this.$router.push({path:"/roleInfo",query:{roleData:t}})},handleEdit:function(e,t){this.$router.push({path:"/roleAddEdit",query:{roleData:t}})},handleDelete:function(e,t){l.a.$deleteRole(this,t)},handleSizeChange:function(e){var t=this,o=this;this.setPageSize(e).then(function(){l.a.$loadRoles(o,{currentPage:t.currentPage,pageSize:t.pageSize})})},handleCurrentChange:function(e){var t=this,o=this;this.setCurrentPage(e).then(function(){l.a.$loadRoles(o,{currentPage:t.currentPage,pageSize:t.pageSize})})}})},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-card",[o("el-table",{attrs:{data:e.roleList,"max-height":e.maxHeight}},[o("el-table-column",{attrs:{label:"序号",type:"index",fixed:"left"}}),e._v(" "),o("el-table-column",{attrs:{label:"角色ID",prop:"roleId",align:e.align,"show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),o("el-table-column",{attrs:{label:"角色名称",prop:"roleName",align:e.align,"show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),o("el-table-column",{attrs:{label:"角色类型",prop:"roleType",align:e.align,"show-overflow-tooltip":e.showOverflowTooltip,formatter:e.formatRoleTypes}}),e._v(" "),o("el-table-column",{attrs:{label:"创建时间",prop:"createTime",align:e.align,"show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),o("el-table-column",{attrs:{label:"创建者",prop:"creator",align:e.align,"show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),o("el-table-column",{attrs:{label:"更新时间",prop:"updateTime",align:e.align,"show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),o("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc",align:e.align,"show-overflow-tooltip":e.showOverflowTooltip}}),e._v(" "),o("el-table-column",{attrs:{fixed:e.fixed,width:e.opWidth,align:e.align},scopedSlots:e._u([{key:"header",fn:function(t){return[o("span",[e._v("操作  ")]),e._v(" "),o("span",[o("el-button",{attrs:{size:"mini",round:"",icon:"el-icon-circle-plus",type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)]}},{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-view"},on:{click:function(o){return e.handleClick(t.$index,t.row)}}}),e._v(" "),o("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-edit",type:"primary"},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),o("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-delete",type:"danger"},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:e.pglayout,total:e.total,"hide-on-single-page":e.isSiglePageHide,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1)},staticRenderFns:[]},u=o("VU/8")(s,c,!1,null,null,null);t.default=u.exports},qBvb:function(e,t,o){"use strict";var r=o("zNUS"),a=o.n(r),n=20,l=[],i={roleId:10001,roleName:"超级管理员角色",roleType:"admin",createTime:"2020-02-02 02:02:02",creator:"admin",updateTime:"2020-02-02 02:02:02",roleDesc:"超级管理员角色"},s={roleId:10002,roleName:"普通管理员角色",roleType:"manager",createTime:"2020-02-02 02:02:02",creator:"admin",updateTime:"2020-02-02 02:02:02",roleDesc:"普通管理员角色"};l.push({roleId:10003,roleName:"用户",roleType:"user",createTime:"2020-02-02 02:02:02",creator:"admin",updateTime:"2020-02-02 02:02:02",roleDesc:"用户"});a.a.mock(/\/mtms\/api\/loadRoles/,function(e){var t={code:0,body:{}};if("POST"!=e.type)return t.code=-9,t.msg="请使用POST请求",t;if(e.body){var o=[],r=JSON.parse(e.body);1==r.currentPage&&(o=new Array(r.pageSize-l.length).fill(i).concat(l)),2==r.currentPage&&(o=new Array(r.pageSize-l.length).fill(s).concat(l)),t.body.data=o,t.body.total=n}return t});a.a.mock(/\/mtms\/api\/saveRole/,function(e){var t={code:0};if("POST"!=e.type)return t.code=-9,t.msg="请使用POST请求",t;if(e.body){var o=JSON.parse(e.body);console.log(o),l.push(o),n+=1,t.msg="成功"}return t});a.a.mock(/\/mtms\/api\/deleteRole/,function(e){var t={code:0};if("POST"!=e.type)return t.code=-9,t.msg="请使用POST请求",t;if(e.body){var o=JSON.parse(e.body);console.log(o),l.pop(o),n-=1,t.msg="成功"}return t});a.a.mock(/\/mtms\/api\/updateRole/,function(e){var t={code:0};if("POST"!=e.type)return t.code=-9,t.msg="请使用POST请求",t;if(e.body){var o=JSON.parse(e.body);console.log(o),i=o,t.msg="成功"}return t});var c=o("zEh/"),u=function(e,t){Object(c.b)("loadRoles",t).then(function(t){if(0!=t.data.code)return console.log(t),void e.$alert(t.data.msg,"温馨提示",{type:"warning"});e.$store.dispatch("role/setRoleList",t.data.body)}).catch(function(t){console.log("接口调用异常："+t),e.$alert(t,"温馨提示",{type:"warning"})})};t.a={$loadRoles:u,$saveRole:function(e,t){Object(c.b)("saveRole",t).then(function(t){0==t.data.code?e.$alert("保存成功","温馨提示",{type:"success"}).then(function(){e.$emit("isShow",!1);var t={};t.pageSize=e.$store.state.role.pageSize,t.currentPage=e.$store.state.role.currentPage,u(e,t)}):e.$alert(t.data.msg,"温馨提示",{type:"warning"})}).catch(function(t){console.log("接口调用异常："+t),e.$alert(t,"温馨提示",{type:"error"})})},$updateRole:function(e,t){Object(c.b)("updateRole",t).then(function(t){0==t.data.code?e.$alert("修改成功","温馨提示",{type:"success"}).then(function(){e.$emit("isShow",!1);var t={};t.pageSize=e.$store.state.role.pageSize,t.currentPage=e.$store.state.role.currentPage,u(e,t)}):e.$alert(t.data.msg,"温馨提示",{type:"warning"})}).catch(function(t){console.log("接口调用异常："+t),e.$alert(t,"温馨提示",{type:"error"})})},$deleteRole:function(e,t){Object(c.b)("deleteRole",t).then(function(t){0==t.data.code?e.$alert("删除成功","温馨提示",{type:"success"}).then(function(){e.$emit("isShow",!1);var t={};t.pageSize=e.$store.state.role.pageSize,t.currentPage=e.$store.state.role.currentPage,u(e,t)}):e.$alert(t.data.msg,"温馨提示",{type:"warning"})}).catch(function(t){console.log("接口调用异常："+t),e.$alert(t,"温馨提示",{type:"error"})})}}}});